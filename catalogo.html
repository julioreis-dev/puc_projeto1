<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="./img/assets/favicon.ico">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
  <script src="mock_database.js"></script>
  <title>BabyLogo-Catalogo</title>
</head>

<body>

  <div class="row d-flex justify-content-center logo">
    <img src="./img/índice-removebg-preview.png" alt="logo">
  </div>
  <div class="container">
    <!-- Navbar -->
    <div class="row">
      <a href="/" class="col-sm-2 offset-1 text-secondary" role="button">Home</a>
      <a href="/cadastro.html" class="col-sm-2 offset-1 text-secondary" role="button">Cadastro</a>
      <a href="/catalogo.html" class="col-sm-2 offset-1 text-secondary" role="button">Catálogo</a>
      <a href="/team.html" class="col-sm-2  offset-1 text-secondary" role="button">Quem Somos</a>
    </div>
    <hr>
    <!-- block content -->
    <div class="row p-4 justify-content-center">
      <h1>CATÁLOGO DE PRODUTOS</h1>
    </div>
    <!-- <div class="row d-flex justify-content-center">      
      <div class="col-sm-3 p-5">
        <img src="./img/blusa_1.png" alt="logo">
        <h4>
          SOU UM PRODUTO
        </h4>
        <h4>
          R$ 10,99
        </h4>
      </div>

      <div class="col-sm-3 p-5">
        <img src="./img/blusa_2.png" alt="logo">
        <h4>
          SOU UM PRODUTO
        </h4>
        <h4>
          R$ 11,99
        </h4>
      </div>

      <div class="col-sm-3 p-5">
        <img src="./img/blusa_3.png" alt="logo">
        <h4>
          SOU UM PRODUTO
        </h4>
        <h4>
          R$ 12,99
        </h4>
      </div>

      <div class="col-sm-3 p-5">
        <img src="./img/blusa_4.png" alt="logo">
        <h4>
          SOU UM PRODUTO
        </h4>
        <h4>
          R$ 13,99
        </h4>
      </div>
    </div>
  </div>    -->

    <div class="container">
      <div class="row p-4 justify-content-center">
        <!-- <h1>Produtos</h1> -->
      </div>
      <div class="row d-flex justify-content-center">
        <div id="lista-produtos">
          <div class="row">
            <div class="col-sm-12">
              <table id="grid-contatos" class="table table-hover">
                <thead>
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Nome</th>
                    <th scope="col">Sobrenome</th>
                    <th scope="col">Email</th>
                    <th scope="col">Produto</th>
                    <th scope="col">Preço (R$)</th>
                    <th scope="col">Descrição</th>
                  </tr>
                </thead>
                <tbody id="table-contatos">
                  <tr>
                    <!-- <td scope="row">1</td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td> -->
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </div>
    </div>


    <!-- The Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
      aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">

          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Deseja finalizar compra</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <form id="form-contato">
              <div class="form-group">
                <!-- <label for="inputId">Id</label> -->
                <input type="hidden" class="form-control" id="inputId" placeholder="ID" disabled>
              </div>
              <div class="form-group">
                <label for="exampleFormControlInput1">Nome do vendedor</label>
                <input type="text" class="form-control" id="inputNome" disabled>
              </div>
              <div class="form-group">
                <label for="exampleFormControlInput3">Email do vendedor</label>
                <input type="email" class="form-control" id="inputEmail" disabled>
              </div>
              <div class="form-group">
                <label for="exampleFormControlInput4">Produto</label>
                <input type="text" class="form-control" id="inputNomeprod" disabled>
              </div>
              <div class="form-group">
                <label for="exampleFormControlInput5">Preço</label>
                <input type="text" class="form-control" id="inputPrecoprod" disabled>
              </div>
              <div class="form-group">
                <label for="exampleFormControlTextarea6">Descrição:</label>
                <textarea class="form-control" id="inputDescricao" rows="7" disabled></textarea>
              </div>
            </form>
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-success" data-dismiss="modal" id="btnDelete">Comprar</button>
            <button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- endblock content -->

  <footer>
    <div class="row d-flex justify-content-center">
      <div class="col-sm-2">
        <a href=""><img src="./img/facebook.png" alt="facebook"></a>
        <a href=""><img src="./img/twitter.png" alt="twiter"></a>
        <a href="https://github.com/julioreis-dev/puc_projeto1"><img src="./img/github.png" alt="github"></a>
      </div>
      <div class="col-sm-6 offset-0">
        <small>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Non, vitae!</small>
        <small>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Beatae, temporibus!</small>
      </div>
      <div class="col-sm-2">
        <div>
          <a class="link-light small text-secondary" href="#!">Privacy</a>
          <span class="text-white mx-1">&middot;</span>
          <a class="link-light small text-secondary" href="#!">Terms</a>
          <span class="text-white mx-1">&middot;</span>
          <a class="link-light small text-secondary" href="#!">Contact</a>
        </div>
      </div>
      <div>
        <br>
        <small class="text-secondary">Copyright &copy;
          <script>document.write(new Date().getFullYear())</script>. Designed &amp; Developed by <a>PUC-MINAS / SISTEMA DE INFORMAÇÃO / GRUPO 3</a>
        </small class="text-secondary">
      </div>
    </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

  <script>
    var prods = '';
    for (let i = 0; i < db.dados.length; i++) {
      let info = db.dados[i];
      $("#table-contatos").append(`<tr><td scope="row">${info.id}</td>
                                                <td>${info.nome}</td>
                                                <td>${info.sobrenome}</td>
                                                <td>${info.email}</td>
                                                <td>${info.nomeprod}</td>
                                                <td>${info.precoprod}</td>
                                                <td>${info.descricao}</td>
                                            </tr>`)
    };

    $("#grid-contatos").on("click", "tr", function (e) {
      let linhaContato = this;
      colunas = linhaContato.querySelectorAll("td");

      $("#inputId").val(colunas[0].innerText);
      $("#inputNome").val(colunas[1].innerText);
      $("#inputSobrenome").val(colunas[2].innerText);
      $("#inputEmail").val(colunas[3].innerText);
      $("#inputNomeprod").val(colunas[4].innerText);
      $("#inputPrecoprod").val(colunas[5].innerText);
      $("#inputDescricao").val(colunas[6].innerText);
      $("#myModal").modal(
        {
          show: true
        }
      )
    });

    $("#btnDelete").click(function () {
      let campoId = $("#inputId").val();
      if (campoId == "") {
        alert("Selecione um contato a ser excluído.");
        return;
      }
      deleteContato(parseInt(campoId));

      // Reexibe os contatos
      // exibeContatos();

      // Limpa o formulario
      $("#form-contato")[0].reset();
    });

    function deleteContato(id) {
      // Filtra o array removendo o elemento com o id passado
      db.dados = db.dados.filter(function (element) { return element.id != id });

      alert("Compra realizada com sucesso!!!");

      // Atualiza os dados no Local Storage
      localStorage.setItem('db_contato', JSON.stringify(db));
    }

  </script>

</body>

</html>